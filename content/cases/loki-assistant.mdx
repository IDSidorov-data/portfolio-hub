---
title: "LOKI — голосовой AI-ассистент (v3.1)"
summary: "Три контура принятия решений, async/await + httpx → низкая задержка; потоковый TTS с прерыванием."
tags: ["AI","Voice","Async/await","Whisper","Piper TTS","Gemini"]
---

<div className="result-callout">
  <strong>TL;DR.</strong> Голосом управляешь ПК: быстрые локальные команды + умные сценарии через LLM; визуальный анализ экрана и самокоррекция. 
  Асинхронная архитектура обеспечивает быстрый отклик.
</div>

<div className="mt-3 flex flex-wrap gap-2">
  <a className="chip chip-positive" href="https://github.com/IDSidorov-data/loki-reborn-ai-assistant" target="_blank" rel="noopener noreferrer">Код</a>
</div>

## Архитектура
- **Контур 0 (локальный):** быстрые команды без API («открой браузер»).  
- **Контур 1 (текст):** классификация намерений лёгкой LLM.  
- **Контур 2 (визуальный):** скрин + команда → мультимодальная модель для выбора действия.  
- **Оркестратор:** retry/fallback, трассировка; **TTS потоковый** с прерыванием.

## Технологии
- Wake-word: `pvporcupine`  
- STT: `openai-whisper` (локально)  
- TTS: `piper-tts` (поточно)  
- LLM: Google Gemini  
- Управление ОС: `pyautogui`, `psutil`  
- Async I/O: `httpx`, `asyncio`  
- Конфиг: `.env`

## Запуск (коротко)
```bash
poetry install
cp .env.example .env   # заполнить ключи и пути
poetry run python main.py
